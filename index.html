<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Guide Complet ‚Äì Pharma Gestion (Anapharmo)</title>
<meta name="description" content="Documentation compl√®te pour l'application React Pharma Gestion / Anapharmo." />
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Ctext y='.9em' font-size='96'%3E‚öïÔ∏è%3C/text%3E%3C/svg%3E">
<style>
  /* ======================= THEME PHARMACIE PROFESSIONNEL ======================= */
  :root{
    --bg:#f8fafb; 
    --surface:#ffffff; 
    --text:#1a2332; 
    --muted:#5a6c7d;
    --primary:#00A651;
    --primary-dark:#008542;
    --accent:#0066CC;
    --accent-light:#4d94ff;
    --success:#10b981; 
    --warn:#f59e0b; 
    --danger:#ef4444;
    --border:rgba(0,166,81,.12); 
    --shadow:0 2px 12px rgba(0,166,81,.08);
    --shadow-lg:0 8px 30px rgba(0,166,81,.12);
    --radius:12px; 
    --radius-sm:8px; 
  }
  
  [data-theme="dark"]{
    --bg:#0d1117; 
    --surface:#161b22; 
    --text:#e6edf3; 
    --muted:#8b949e;
    --primary:#10b981; 
    --primary-dark:#059669;
    --accent:#4d94ff;
    --border:rgba(16,185,129,.15); 
    --shadow:0 2px 12px rgba(0,0,0,.3);
    --shadow-lg:0 8px 30px rgba(0,0,0,.4);
  }

  *{box-sizing:border-box; margin:0; padding:0} 
  html,body{height:100%}
  body{
    font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, 'Helvetica Neue', Arial, sans-serif;
    color:var(--text); 
    background:var(--bg);
    line-height:1.6;
  }

  a{color:inherit; text-decoration:none} 
  img{max-width:100%; height:auto}

  /* ======================= LAYOUT RESPONSIVE ======================= */
  .layout{
    display:grid; 
    grid-template-columns: 320px 1fr; 
    gap:0; 
    min-height:100vh;
  }
  
  @media (max-width:1100px){ 
    .layout{grid-template-columns: 280px 1fr} 
  }
  
  @media (max-width:768px){ 
    .layout{grid-template-columns: 1fr} 
  }

  aside{
    position:sticky; 
    top:0; 
    align-self:start; 
    height:100vh; 
    overflow:auto;
    border-right:2px solid var(--border);
    background:var(--surface);
    box-shadow:var(--shadow-lg);
  }
  
  @media (max-width:1100px){ 
    aside{ 
      font-size:14px;
    } 
  }
  
  @media (max-width:768px){ 
    aside{ 
      position:static; 
      height:auto;
      border-right:none;
      border-bottom:2px solid var(--border);
    } 
  }

  .pharma-cross{
    width:42px;
    height:42px;
    background:linear-gradient(135deg, var(--primary), var(--primary-dark));
    position:relative;
    border-radius:6px;
    box-shadow:var(--shadow-lg);
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .pharma-cross::before,
  .pharma-cross::after{
    content:'';
    position:absolute;
    background:#fff;
  }
  .pharma-cross::before{
    width:6px;
    height:24px;
  }
  .pharma-cross::after{
    width:24px;
    height:6px;
  }

  .brand{
    padding:28px 24px; 
    display:flex; 
    gap:16px; 
    align-items:center;
    border-bottom:2px solid var(--border); 
    background:linear-gradient(135deg, rgba(0,166,81,.05), rgba(0,102,204,.03));
  }
  .brand h1{
    margin:0; 
    font-size:20px; 
    font-weight:700; 
    letter-spacing:.3px;
    color:var(--primary-dark);
  }
  .brand small{
    display:block; 
    color:var(--muted); 
    font-weight:500;
    font-size:13px;
  }
  
  @media (max-width:768px){
    .brand{
      padding:20px 16px;
      gap:12px;
    }
    .brand h1{
      font-size:18px;
    }
    .brand small{
      font-size:12px;
    }
  }

  .tools{
    display:flex; 
    gap:10px; 
    padding:20px 24px; 
    border-bottom:1px solid var(--border); 
    flex-wrap:wrap;
    background:rgba(0,166,81,.02);
  }
  
  @media (max-width:768px){
    .tools{
      padding:16px;
      gap:8px;
    }
  }

  .btn{
    appearance:none; 
    border:1.5px solid var(--border); 
    background:var(--surface);
    color:var(--text); 
    padding:10px 16px; 
    border-radius:var(--radius-sm); 
    font-weight:600; 
    font-size:14px;
    cursor:pointer; 
    transition:all .2s ease;
    box-shadow:var(--shadow);
  }
  .btn:hover{
    transform:translateY(-2px);
    box-shadow:var(--shadow-lg);
    border-color:var(--primary);
  }
  .btn:active{transform:translateY(0)}
  .btn.primary{
    background:linear-gradient(135deg, var(--primary), var(--primary-dark)); 
    border:0; 
    color:#fff;
  }
  .btn.accent{
    background:linear-gradient(135deg, var(--accent), var(--accent-light)); 
    border:0; 
    color:#fff;
  }
  .btn.ghost{
    background:transparent; 
    box-shadow:none;
    border:1px solid transparent;
  }
  .btn.ghost:hover{
    background:rgba(0,166,81,.08);
    border-color:var(--border);
  }
  
  @media (max-width:768px){
    .btn{
      padding:8px 12px;
      font-size:13px;
    }
  }

  .search{
    padding:20px 24px; 
    border-bottom:1px solid var(--border);
  }
  .search input{
    width:100%; 
    padding:12px 16px; 
    border-radius:var(--radius-sm); 
    border:2px solid var(--border);
    background:var(--surface); 
    color:var(--text); 
    font-weight:500;
    font-size:14px;
    transition:all .2s ease;
  }
  .search input:focus{
    outline:none;
    border-color:var(--primary);
    box-shadow:0 0 0 3px rgba(0,166,81,.1);
  }

  nav.toc{padding:16px 12px 40px}
  .toc .title{
    margin:12px 12px 16px; 
    color:var(--muted); 
    font-weight:700; 
    text-transform:uppercase; 
    letter-spacing:.1em; 
    font-size:11px;
  }
  .toc a{
    display:flex; 
    gap:12px; 
    align-items:center; 
    padding:12px 16px; 
    margin:4px 8px; 
    border-radius:var(--radius-sm);
    color:var(--text); 
    text-decoration:none; 
    border:2px solid transparent; 
    font-weight:600;
    font-size:14px;
    transition:all .2s ease;
  }
  .toc a small{
    color:var(--muted); 
    font-weight:500;
    font-size:12px;
  }
  .toc a.active{
    border-color:var(--primary); 
    background:linear-gradient(135deg, rgba(0,166,81,.1), rgba(0,166,81,.05));
    color:var(--primary-dark);
  }
  .toc a:hover{
    border-color:var(--border); 
    background:rgba(0,166,81,.05);
  }
  .toc .sep{
    margin:20px 20px; 
    height:2px; 
    background:linear-gradient(90deg, transparent, var(--border), transparent);
  }

  main{min-width:0}

  .hero{
    padding:60px min(5vw,50px); 
    border-bottom:2px solid var(--border);
    background:
      linear-gradient(135deg, rgba(0,166,81,.08), rgba(0,102,204,.05)),
      var(--surface);
    position:relative;
  }
  .hero::before{
    content:'';
    position:absolute;
    top:0;
    right:0;
    width:400px;
    height:400px;
    background:radial-gradient(circle, rgba(0,166,81,.15), transparent);
    pointer-events:none;
  }
  .hero h2{
    margin:0 0 12px; 
    font-size:38px; 
    font-weight:700;
    letter-spacing:.3px;
    color:var(--primary-dark);
    position:relative;
  }
  .hero p{
    margin:0; 
    color:var(--muted); 
    font-weight:500; 
    font-size:17px;
    position:relative;
  }
  
  @media (max-width:1100px){
    .hero{
      padding:50px 30px;
    }
    .hero h2{
      font-size:32px;
    }
    .hero p{
      font-size:16px;
    }
    .hero::before{
      width:300px;
      height:300px;
    }
  }
  
  @media (max-width:768px){
    .hero{
      padding:40px 20px;
    }
    .hero h2{
      font-size:26px;
    }
    .hero p{
      font-size:15px;
    }
    .hero::before{
      width:200px;
      height:200px;
      opacity:0.5;
    }
  }

  .container{
    padding: min(5vw,50px); 
    max-width:1200px; 
    margin:0 auto;
  }
  
  @media (max-width:1100px){
    .container{
      padding:30px;
    }
  }
  
  @media (max-width:768px){
    .container{
      padding:20px;
    }
  }

  .shortcuts{
    display:grid; 
    grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); 
    gap:16px;
    margin: 32px 0 40px;
  }
  
  @media (max-width:1100px){ 
    .shortcuts{
      grid-template-columns: repeat(auto-fit, minmax(140px,1fr));
      gap:12px;
    } 
  }
  
  @media (max-width:768px){ 
    .shortcuts{
      grid-template-columns: repeat(2, 1fr);
      gap:10px;
      margin:24px 0 32px;
    } 
  }
  
  @media (max-width:480px){ 
    .shortcuts{
      grid-template-columns: 1fr;
    } 
  }

  .shot{
    display:flex; 
    flex-direction:column; 
    gap:10px; 
    padding:20px; 
    border-radius:var(--radius);
    border:2px solid var(--border); 
    background:var(--surface); 
    box-shadow:var(--shadow);
    text-decoration:none; 
    color:var(--text); 
    font-weight:600;
    transition:all .25s ease;
    position:relative;
    overflow:hidden;
  }
  .shot::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:4px;
    background:linear-gradient(90deg, var(--primary), var(--accent));
    transform:scaleX(0);
    transition:transform .25s ease;
  }
  .shot:hover{
    transform:translateY(-4px);
    box-shadow:var(--shadow-lg);
    border-color:var(--primary);
  }
  .shot:hover::before{
    transform:scaleX(1);
  }
  .shot .icon{font-size:28px}
  .shot span:nth-child(2){
    font-size:15px;
    color:var(--primary-dark);
  }
  .shot .hint{
    font-size:12px; 
    color:var(--muted); 
    font-weight:500;
  }
  
  @media (max-width:768px){
    .shot{
      padding:16px;
      gap:8px;
    }
    .shot .icon{
      font-size:24px;
    }
    .shot span:nth-child(2){
      font-size:14px;
    }
    .shot .hint{
      font-size:11px;
    }
  }

  section{
    scroll-margin-top:120px; 
    margin:36px 0; 
    padding:32px;
    border:2px solid var(--border); 
    border-radius:var(--radius);
    background:var(--surface); 
    box-shadow:var(--shadow);
    position:relative;
  }
  section::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    width:6px;
    height:100%;
    background:linear-gradient(180deg, var(--primary), var(--accent));
    border-radius:var(--radius) 0 0 var(--radius);
  }
  
  @media (max-width:1100px){
    section{
      margin:28px 0;
      padding:24px;
    }
  }
  
  @media (max-width:768px){
    section{
      margin:20px 0;
      padding:20px;
      scroll-margin-top:80px;
    }
    section::before{
      width:4px;
    }
  }
  
  h3{
    margin:0 0 16px; 
    font-size:26px; 
    font-weight:700;
    letter-spacing:.2px;
    color:var(--primary-dark);
  }
  
  @media (max-width:768px){
    h3{
      font-size:22px;
      margin:0 0 12px;
    }
  }
  
  .lead{
    color:var(--muted); 
    font-weight:500;
    margin-bottom:20px;
    line-height:1.7;
  }
  
  @media (max-width:768px){
    .lead{
      font-size:14px;
      margin-bottom:16px;
    }
  }

  .grid{display:grid; gap:20px}
  .grid.cols-2{grid-template-columns:1fr 1fr}
  .grid.cols-3{grid-template-columns:1fr 1fr 1fr}
  
  @media (max-width:1100px){ 
    .grid{gap:16px}
    .grid.cols-3{grid-template-columns:1fr 1fr} 
  }
  
  @media (max-width:768px){ 
    .grid{gap:12px}
    .grid.cols-2,.grid.cols-3{grid-template-columns:1fr} 
  }

  .card{
    border:2px solid var(--border); 
    border-radius:var(--radius-sm); 
    padding:24px; 
    background:linear-gradient(135deg, rgba(255,255,255,.8), rgba(0,166,81,.02));
    transition:all .2s ease;
  }
  .card:hover{
    box-shadow:var(--shadow-lg);
    transform:translateY(-2px);
  }
  
  @media (max-width:768px){
    .card{
      padding:16px;
    }
  }
  
  .kbd{
    display:inline-block; 
    padding:4px 10px; 
    border-radius:6px; 
    border:1.5px solid var(--border); 
    background:rgba(0,166,81,.08); 
    font-weight:700;
    font-size:13px;
    color:var(--primary-dark);
  }
  
  .pill{
    font-size:12px; 
    padding:4px 12px; 
    border-radius:999px; 
    background:linear-gradient(135deg, rgba(0,166,81,.15), rgba(0,102,204,.1)); 
    border:1.5px solid var(--border); 
    font-weight:700;
    color:var(--primary-dark);
  }

  ul.check{
    list-style:none; 
    padding-left:0;
  }
  ul.check li{
    padding-left:35px; 
    position:relative; 
    margin:12px 0;
    line-height:1.6;
  }
  ul.check li:before{
    content:"‚úì"; 
    position:absolute; 
    left:0; 
    color:var(--primary); 
    font-weight:900;
    font-size:18px;
    width:24px;
    height:24px;
    background:rgba(0,166,81,.1);
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  
  @media (max-width:768px){
    ul.check li{
      padding-left:32px;
      margin:10px 0;
      font-size:14px;
    }
    ul.check li:before{
      width:22px;
      height:22px;
      font-size:16px;
    }
  }

  .steps{counter-reset:s}
  .step{
    counter-increment:s; 
    padding-left:52px; 
    position:relative; 
    margin:16px 0;
    line-height:1.6;
  }
  .step:before{
    content:counter(s); 
    position:absolute; 
    left:0; 
    top:0; 
    width:36px; 
    height:36px; 
    border-radius:8px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:800; 
    background:linear-gradient(135deg, var(--primary), var(--accent)); 
    color:#fff;
    box-shadow:var(--shadow);
  }
  
  @media (max-width:768px){
    .step{
      padding-left:44px;
      margin:12px 0;
      font-size:14px;
    }
    .step:before{
      width:32px;
      height:32px;
      font-size:14px;
    }
  }

  details{
    border:2px solid var(--border); 
    border-radius:var(--radius-sm); 
    padding:16px 20px; 
    background:rgba(0,166,81,.04);
    margin:16px 0;
  }
  details summary{
    cursor:pointer; 
    font-weight:700;
    color:var(--primary-dark);
    font-size:15px;
  }
  details[open] summary{
    margin-bottom:12px;
  }

  .notice{
    border-left:5px solid var(--primary); 
    padding:16px 20px; 
    background:rgba(0,166,81,.08); 
    border-radius:var(--radius-sm);
    margin:20px 0;
    font-weight:500;
  }
  .notice.warn{
    border-left-color:var(--warn); 
    background:rgba(245,158,11,.08);
  }
  .notice.danger{
    border-left-color:var(--danger); 
    background:rgba(239,68,68,.08);
  }
  
  @media (max-width:768px){
    .notice{
      padding:12px 16px;
      font-size:14px;
      margin:16px 0;
    }
  }

  footer{
    padding:40px 24px; 
    border-top:2px solid var(--border); 
    color:var(--muted); 
    text-align:center; 
    background:linear-gradient(135deg, rgba(0,166,81,.03), rgba(0,102,204,.02));
    font-weight:500;
  }
  
  @media (max-width:768px){
    footer{
      padding:32px 20px;
      font-size:14px;
    }
  }

  .hidden{display:none !important}
  .srchHit{
    background:rgba(245,158,11,.3); 
    border-radius:4px; 
    padding:2px 4px;
    font-weight:600;
  }

  pre{
    background:rgba(0,0,0,.05);
    padding:16px;
    border-radius:var(--radius-sm);
    overflow-x:auto;
    font-size:13px;
    border:1px solid var(--border);
  }

  code{
    font-family:'Courier New', monospace;
    font-size:13px;
  }

  ol{
    padding-left:0;
    list-style:none;
  }

  .feature-badge{
    display:inline-block;
    padding:4px 10px;
    border-radius:6px;
    font-size:11px;
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:.05em;
    margin-left:8px;
  }
  .feature-badge.new{
    background:linear-gradient(135deg, #10b981, #059669);
    color:#fff;
  }
  .feature-badge.crud{
    background:linear-gradient(135deg, #3b82f6, #2563eb);
    color:#fff;
  }
</style>
</head>
<body data-theme="light">
  <div class="layout">

    <!-- =================== SIDEBAR =================== -->
    <aside>
      <div class="brand">
        <div class="pharma-cross"></div>
        <div>
          <h1>Pharma Gestion</h1>
          <small>Guide Utilisateur Complet</small>
        </div>
      </div>

      <div class="tools">
        <button id="toggleTheme" class="btn">üåì Mode</button>
        <button id="printBtn" class="btn">üñ®Ô∏è PDF</button>
        <button id="expandAll" class="btn ghost">‚ûï Tout</button>
        <button id="collapseAll" class="btn ghost">‚ûñ Tout</button>
      </div>

      <div class="search">
        <input id="searchInput" type="search" placeholder="üîç Rechercher..." />
      </div>

      <nav class="toc" id="toc">
        <div class="title">Sommaire</div>
        <a href="#intro" class="active">üìå <b>Introduction</b><small>&nbsp;Aper√ßu</small></a>
        <a href="#demarrage">üöÄ <b>D√©marrage</b><small>&nbsp;Installation</small></a>
        <a href="#roles">üßë‚Äç‚öïÔ∏è <b>R√¥les & Acc√®s</b><small>&nbsp;Permissions</small></a>
        <div class="sep"></div>
        <a href="#dashboard">üìä <b>Dashboard</b><small>&nbsp;Indicateurs</small></a>
        <a href="#analytics">üìà <b>Analytics</b><small>&nbsp;Graphiques</small></a>
        <a href="#stock">üì¶ <b>Stock multi-lots</b><small>&nbsp;Gestion</small></a>
        <a href="#ventes">üí≥ <b>Ventes</b><small>&nbsp;Encaissement</small></a>
        <a href="#achats">üõí <b>Achats</b><small>&nbsp;R√©ception</small></a>
        <a href="#clients">üë• <b>Clients & Ordonnances</b><small>&nbsp;Suivi</small></a>
        <a href="#devis">üìÑ <b>Devis & Factures</b><small>&nbsp;Documents</small></a>
        <a href="#paiements">üíµ <b>Paiements CRUD</b><small>&nbsp;Gestion compl√®te</small></a>
        <a href="#backup">‚òÅÔ∏è <b>Sauvegardes</b><small>&nbsp;Export/Import</small></a>
        <a href="#invites">üë§ <b>Utilisateurs</b><small>&nbsp;Gestion</small></a>
        <a href="#params">‚öôÔ∏è <b>Param√®tres</b><small>&nbsp;Configuration</small></a>
        <a href="#legal">‚öñÔ∏è <b>Documents L√©gaux</b><small>&nbsp;CGU/CGV</small></a>
        <div class="sep"></div>
        <a href="#faq">‚ùì <b>FAQ</b><small>&nbsp;Aide</small></a>
        <a href="#support">üÜò <b>Support</b><small>&nbsp;Contact</small></a>
      </nav>
    </aside>

    <!-- =================== CONTENT =================== -->
    <main>
      <header class="hero">
        <h2>‚öïÔ∏è Guide Professionnel Pharma Gestion</h2>
        <p>Documentation compl√®te pour la gestion moderne de votre officine pharmaceutique</p>

        <!-- Barre de raccourcis -->
        <div class="container" style="padding-left:0;padding-right:0;">
          <div class="shortcuts">
            <a class="shot" href="#demarrage">
              <span class="icon">üöÄ</span>
              <span>D√©marrer</span>
              <span class="hint">Installation rapide</span>
            </a>
            <a class="shot" href="#analytics">
              <span class="icon">üìà</span>
              <span>Analytics</span>
              <span class="hint">Statistiques</span>
            </a>
            <a class="shot" href="#ventes">
              <span class="icon">üí≥</span>
              <span>Ventes</span>
              <span class="hint">Encaissement</span>
            </a>
            <a class="shot" href="#clients">
              <span class="icon">üë•</span>
              <span>Clients</span>
              <span class="hint">Ordonnances</span>
            </a>
            <a class="shot" href="#paiements">
              <span class="icon">üíµ</span>
              <span>Paiements</span>
              <span class="hint">CRUD complet</span>
            </a>
            <a class="shot" href="#stock">
              <span class="icon">üì¶</span>
              <span>Stock</span>
              <span class="hint">Multi-lots</span>
            </a>
            <a class="shot" href="#backup">
              <span class="icon">‚òÅÔ∏è</span>
              <span>Backup</span>
              <span class="hint">S√©curit√©</span>
            </a>
            <a class="shot" href="#params">
              <span class="icon">‚öôÔ∏è</span>
              <span>Config</span>
              <span class="hint">Param√®tres</span>
            </a>
          </div>
        </div>
      </header>

      <div class="container">

        <section id="intro">
          <h3>üìå Introduction</h3>
          <p class="lead">Application web compl√®te pour la gestion pharmaceutique : <b>stock multi-lots</b>, <b>ventes</b>, <b>achats</b>, <b>clients & ordonnances</b>, <b>analytics avanc√©s</b>, <b>paiements CRUD</b>, <b>facturation</b> et <b>sauvegardes</b>. D√©velopp√©e avec <b>React</b> et <b>Firebase</b> pour une performance optimale.</p>
          <ul class="check">
            <li>Interface <b>professionnelle</b> et intuitive</li>
            <li>Compatible ordinateur, tablette et mobile</li>
            <li>Recherche instantan√©e et navigation fluide</li>
            <li>Analytics avec graphiques interactifs</li>
            <li>Gestion compl√®te des paiements (CRUD)</li>
            <li>Suivi des ordonnances avec WhatsApp</li>
            <li>S√©curit√© et sauvegarde automatique</li>
          </ul>
          <div class="notice">üí° <b>Astuce :</b> Utilisez <span class="kbd">Ctrl</span> + <span class="kbd">F</span> pour une recherche rapide, ou la barre de recherche int√©gr√©e.</div>
        </section>

        <section id="demarrage">
          <h3>üöÄ D√©marrage rapide</h3>
          <div class="grid cols-2">
            <div class="card">
              <div class="step"><b>Connexion</b> : Cr√©ez votre compte pharmacien (propri√©taire)</div>
              <div class="step"><b>Soci√©t√©</b> : Enregistrez votre officine pour obtenir un identifiant unique</div>
              <div class="step"><b>√âquipe</b> : Invitez vos collaborateurs avec leurs r√¥les respectifs</div>
            </div>
            <div class="card">
              <details open>
                <summary>üîß Configuration Firebase</summary>
                <p class="lead">Authentification s√©curis√©e avec base de donn√©es Firestore et persistance locale automatique.</p>
                <pre><code>// Stockage local avec support multi-onglets
initializeFirestore(app, {
  localCache: persistentLocalCache({
    tabManager: persistentMultipleTabManager()
  })
});</code></pre>
              </details>
            </div>
          </div>
        </section>

        <section id="roles">
          <h3>üßë‚Äç‚öïÔ∏è R√¥les & Permissions</h3>
          <p class="lead">Syst√®me de r√¥les flexible : <b>Docteur (Owner)</b>, <b>Vendeuse</b>. Permissions personnalisables selon les besoins.</p>
          <div class="grid cols-2">
            <div class="card">
              <h4 style="margin-bottom:12px;color:var(--primary);">üëë Docteur (Owner)</h4>
              <span class="pill">Acc√®s complet</span>
              <p style="margin-top:12px;">Tous les modules, param√®tres, sauvegardes, gestion utilisateurs, analytics</p>
            </div>
            <div class="card">
              <h4 style="margin-bottom:12px;color:var(--accent);">üë©‚Äçüíº Vendeuse</h4>
              <span class="pill">Acc√®s limit√©</span>
              <p style="margin-top:12px;">Ventes, consultation stock, clients. Permissions configurables</p>
            </div>
          </div>
        </section>

        <section id="dashboard">
          <h3>üìä Tableau de bord</h3>
          <p class="lead">Vue d'ensemble en temps r√©el : ventes du jour, achats, √©tat de caisse, alertes stock et p√©remptions.</p>
          <ul class="check">
            <li>Indicateurs p√©riode (jour/semaine/mois)</li>
            <li>Acc√®s rapide √† tous les modules</li>
            <li>Alertes et notifications importantes</li>
            <li>Statistiques de performance</li>
          </ul>
        </section>

        <section id="analytics">
          <h3>üìà Analytics & Statistiques <span class="feature-badge new">Nouveau</span></h3>
          <p class="lead">Tableaux de bord analytiques avec graphiques interactifs pour visualiser vos performances.</p>
          
          <div class="card" style="margin-bottom:16px">
            <h4 style="margin-bottom:12px;color:var(--primary);">üéØ Fonctionnalit√©s Analytics</h4>
            <ul class="check">
              <li><b>P√©riodes flexibles</b> : Jour (30j), Semaine (12 sem.), Mois (12 mois), Ann√©e (5 ans)</li>
              <li><b>M√©triques multiples</b> : CA, Achats, Paiements, B√©n√©fice</li>
              <li><b>Types de graphiques</b> : Ligne, Barres, Camembert</li>
              <li><b>Comparaisons</b> : Toutes m√©triques sur un seul graphique</li>
              <li><b>Statistiques</b> : Total, Moyenne, Maximum pour chaque m√©trique</li>
            </ul>
          </div>

          <details open>
            <summary>üìä Utilisation des Analytics</summary>
            <div class="step">S√©lectionnez la <b>p√©riode</b> d'analyse (jour, semaine, mois, ann√©e)</div>
            <div class="step">Choisissez la <b>m√©trique</b> √† visualiser (CA, achats, paiements, b√©n√©fice)</div>
            <div class="step">Optez pour le <b>type de graphique</b> (ligne ou barres)</div>
            <div class="step">Consultez les <b>cartes statistiques</b> pour les totaux et moyennes</div>
            <div class="step">Utilisez le <b>graphique comparatif</b> pour voir toutes les m√©triques</div>
          </details>

          <div class="notice">üí° <b>Astuce :</b> Le graphique camembert montre la r√©partition entre CA, Achats et Paiements sur la p√©riode s√©lectionn√©e.</div>
        </section>

        <section id="stock">
          <h3>üì¶ Gestion Stock Multi-lots</h3>
          <p class="lead">Syst√®me avanc√© de gestion par lots : <b>quantit√©s S1/S2</b>, <b>prix d'achat/vente</b>, <b>dates de p√©remption</b>, <b>codes-barres</b> et tra√ßabilit√© compl√®te.</p>
          <details open>
            <summary>‚ûï Ajouter ou modifier un lot</summary>
            <ol class="steps">
              <li class="step">Depuis le module <b>Achats</b>, la r√©ception automatique cr√©e/met √† jour les lots</li>
              <li class="step">Modifiez les prix de vente, dates de p√©remption et effectuez des transferts S1‚ÜîS2</li>
              <li class="step">Recherchez rapidement par nom, num√©ro de lot ou code-barres</li>
            </ol>
          </details>
          <div class="notice">‚úÖ La synchronisation <b>Ventes ‚Üí Stock</b> d√©cr√©mente automatiquement les lots vendus.</div>
        </section>

        <section id="ventes">
          <h3>üí≥ Module de Vente</h3>
          <p class="lead">Interface de vente rapide : s√©lection produit, choix du lot, quantit√©, remise, mode de paiement et notes client.</p>
          <div class="grid cols-2">
            <div class="card">
              <ul class="check">
                <li>Lots tri√©s par disponibilit√© et p√©remption</li>
                <li>Calcul automatique du total avec remises</li>
                <li>Historique filtrable par client/produit/statut</li>
                <li>G√©n√©ration de re√ßus et factures</li>
              </ul>
            </div>
            <div class="card">
              <details open>
                <summary>üí° Conseils d'utilisation</summary>
                <p>Commencez par s√©lectionner le <b>produit</b>, l'application proposera automatiquement le <b>lot optimal</b> (p√©remption la plus proche).</p>
              </details>
            </div>
          </div>
        </section>

        <section id="achats">
          <h3>üõí Gestion des Achats</h3>
          <p class="lead">Workflow complet : commande ‚Üí r√©ception ‚Üí cr√©ation automatique des lots. Gestion des transferts mensuels S1‚ÜîS2.</p>
          <ul class="check">
            <li>R√©ception multi-lots par ligne de commande</li>
            <li>Transferts S1/S2 avec bon d√©di√©</li>
            <li>Totaux et filtres par fournisseur/date</li>
            <li>Historique complet des r√©ceptions</li>
          </ul>
        </section>

        <section id="clients">
          <h3>üë• Clients & Suivi des Ordonnances <span class="feature-badge new">Nouveau</span></h3>
          <p class="lead">Module complet de gestion des clients et ordonnances avec notification WhatsApp automatique.</p>
          
          <div class="card" style="margin-bottom:16px">
            <h4 style="margin-bottom:12px;color:var(--primary);">üéØ Fonctionnalit√©s Ordonnances</h4>
            <ul class="check">
              <li><b>Cr√©ation ordonnances</b> : Client, m√©decin, m√©dicaments (du stock ou hors stock)</li>
              <li><b>√âtats multiples</b> : Nouvelle ‚Üí En pr√©paration ‚Üí Pr√™te ‚Üí Livr√©e</li>
              <li><b>Notification WhatsApp</b> : Envoi automatique avec code de retrait</li>
              <li><b>Mode livraison</b> : Retrait ou livraison avec adresse</li>
              <li><b>Suivi complet</b> : Recherche, filtres, historique par statut</li>
            </ul>
          </div>

          <details open>
            <summary>üì± Workflow Ordonnance avec WhatsApp</summary>
            <div class="step">Cr√©er l'ordonnance avec <b>client</b>, <b>t√©l√©phone</b>, <b>m√©decin</b> et <b>m√©dicaments</b></div>
            <div class="step">D√©marrer la pr√©paration (statut : <span class="pill">En pr√©paration</span>)</div>
            <div class="step">Marquer <b>Pr√™te + WhatsApp</b> : g√©n√®re un code et envoie message automatique</div>
            <div class="step">√Ä la remise au client, v√©rifier le <b>code de retrait</b></div>
            <div class="step">Marquer comme <b>Livr√©e</b> apr√®s validation du code</div>
          </details>

          <div class="card" style="margin-top:16px">
            <h4 style="margin-bottom:12px;color:var(--accent);">üíä M√©dicaments : Stock ou Hors Stock</h4>
            <p><b>Option 1 - Depuis le stock :</b> S√©lectionnez un m√©dicament existant, le syst√®me copie automatiquement le nom, fournisseur et prix de vente.</p>
            <p style="margin-top:8px"><b>Option 2 - Nouveau m√©dicament (hors stock) :</b> Cr√©ez un article local sans l'ajouter au stock. Saisissez nom, prix et fournisseur.</p>
            <div class="notice" style="margin-top:12px">‚ö†Ô∏è Les m√©dicaments "hors stock" apparaissent uniquement dans l'ordonnance et ne modifient pas votre inventaire.</div>
          </div>
        </section>

        <section id="devis">
          <h3>üìÑ Devis & Facturation</h3>
          <p class="lead">Num√©rotation automatique (<span class="pill">DEV0001</span> / <span class="pill">FACT0001</span>), format professionnel, conversion en lettres.</p>
          <details open>
            <summary>üìù Bonnes pratiques</summary>
            <ul class="check">
              <li>Configurez <b>en-t√™te</b>, <b>pied de page</b> et <b>cachet</b> dans Param√®tres</li>
              <li>Associez les ventes aux factures pour un suivi pr√©cis</li>
              <li>Exportez en PDF pour l'archivage et l'envoi</li>
            </ul>
          </details>
        </section>

        <section id="paiements">
          <h3>üíµ Gestion des Paiements CRUD <span class="feature-badge crud">CRUD</span></h3>
          <p class="lead">Module complet de gestion des paiements avec <b>Cr√©er, Modifier, Supprimer</b>. Gestion avanc√©e des instruments (ch√®ques/traites).</p>
          
          <div class="card" style="margin-bottom:16px">
            <h4 style="margin-bottom:12px;color:var(--primary);">üéØ Fonctionnalit√©s CRUD Paiements</h4>
            <ul class="check">
              <li><b>Cr√©er</b> : Paiements esp√®ces, ch√®ques ou traites avec instruments multiples</li>
              <li><b>Modifier</b> : √âditer date, mode, montant et instruments d'un paiement existant</li>
              <li><b>Supprimer</b> : Suppression avec recalcul automatique du solde document</li>
              <li><b>Instruments</b> : Gestion d√©taill√©e (banque, n¬∞, √©ch√©ance, titulaire, montant)</li>
              <li><b>Filtres avanc√©s</b> : Par nom, date, mode de paiement, statut</li>
              <li><b>Statistiques</b> : Totaux par mode (esp√®ces/ch√®ques/traites)</li>
            </ul>
          </div>

          <details open>
            <summary>‚ûï Cr√©er un paiement</summary>
            <div class="step">S√©lectionnez un <b>document avec solde</b> (vente ou achat)</div>
            <div class="step">Choisissez le <b>mode de paiement</b> : Esp√®ces, Ch√®que ou Traite</div>
            <div class="step"><b>Esp√®ces</b> : Saisissez le montant directement</div>
            <div class="step"><b>Ch√®ques/Traites</b> : Ajoutez des instruments avec d√©tails complets</div>
            <div class="step">Enregistrez : le solde et statut du document se mettent √† jour automatiquement</div>
          </details>

          <details>
            <summary>‚úèÔ∏è Modifier un paiement</summary>
            <div class="step">Cliquez sur <b>Modifier</b> dans la liste des paiements d'un document</div>
            <div class="step">Modifiez la <b>date</b>, le <b>mode</b> ou le <b>montant</b></div>
            <div class="step">Pour ch√®ques/traites : modifiez les instruments (ajout, suppression, √©dition)</div>
            <div class="step">Enregistrez : recalcul automatique du total et du solde document</div>
          </details>

          <details>
            <summary>üóëÔ∏è Supprimer un paiement</summary>
            <div class="step">Cliquez sur <b>üóëÔ∏è</b> √† c√¥t√© du paiement</div>
            <div class="step">Confirmez la suppression</div>
            <div class="step">Le montant est automatiquement soustrait et le statut du document recalcul√©</div>
          </details>

          <div class="card" style="margin-top:16px">
            <h4 style="margin-bottom:12px;color:var(--accent);">üìã Gestion des Instruments</h4>
            <p><b>Pour ch√®ques et traites :</b> Vous pouvez g√©rer plusieurs instruments par paiement.</p>
            <p style="margin-top:8px"><b>Champs instrument :</b></p>
            <ul style="margin-top:8px;padding-left:20px">
              <li>Type (ch√®que ou traite)</li>
              <li>Banque</li>
              <li>Num√©ro</li>
              <li>Date d'√©ch√©ance</li>
              <li>Titulaire</li>
              <li>Montant</li>
            </ul>
            <div class="notice" style="margin-top:12px">üí° Le total du paiement = somme des montants de tous les instruments.</div>
          </div>

          <div class="card" style="margin-top:16px">
            <h4 style="margin-bottom:12px;color:var(--primary-dark);">üîç Filtres & Recherche</h4>
            <ul class="check">
              <li><b>Par type</b> : Ventes ou Achats</li>
              <li><b>Par nom</b> : Client ou fournisseur</li>
              <li><b>Par p√©riode</b> : Date de d√©but et fin (sur dates paiements)</li>
              <li><b>Par mode</b> : Esp√®ces, Ch√®ques, Traites ou tous</li>
              <li><b>Par statut</b> : Pay√©s, Avec solde ou tous</li>
              <li><b>Impression</b> : √âtat filtr√© complet avec r√©capitulatifs</li>
            </ul>
          </div>

          <div class="notice warn" style="margin-top:16px">
            ‚ö†Ô∏è <b>Important :</b> Toute modification ou suppression de paiement recalcule automatiquement :
            <ul style="margin-top:8px;padding-left:20px">
              <li>Le montant total pay√© du document</li>
              <li>Le solde restant</li>
              <li>Le statut (Impay√© / Partiel / Pay√©)</li>
            </ul>
          </div>
        </section>

        <section id="backup">
          <h3>‚òÅÔ∏è Sauvegardes Automatiques</h3>
          <p class="lead">Export JSON complet, import contr√¥l√© avec pr√©visualisation et validation.</p>
          <details open>
            <summary>üíæ Proc√©dure recommand√©e</summary>
            <div class="step">Menu Sauvegardes ‚Üí <b>Cr√©er une sauvegarde</b> (format .json)</div>
            <div class="step">Stockez sur cl√© USB, cloud ou serveur local</div>
            <div class="step">Import : <b>pr√©visualisez</b> ‚Üí choisir remplacement ou fusion</div>
          </details>
          <div class="notice danger">‚ö†Ô∏è <b>Mode remplacement</b> : supprime toutes les donn√©es existantes avant l'import. Utilisez avec pr√©caution.</div>
        </section>

        <section id="invites">
          <h3>üë§ Gestion des Utilisateurs <span class="feature-badge new">Am√©lior√©</span></h3>
          <p class="lead">Module complet de gestion d'√©quipe avec suppression, restauration et changement de r√¥les.</p>
          
          <div class="card" style="margin-bottom:16px">
            <h4 style="margin-bottom:12px;color:var(--primary);">üéØ Fonctionnalit√©s Utilisateurs</h4>
            <ul class="check">
              <li><b>Invitation</b> : Code ou lien direct pour nouveaux utilisateurs</li>
              <li><b>R√¥les</b> : Docteur (owner) ou Vendeuse, modifiable √† tout moment</li>
              <li><b>Suppression</b> : Marquage avec blocage d'acc√®s (conserve historique)</li>
              <li><b>Restauration</b> : R√©activation d'un utilisateur supprim√©</li>
              <li><b>Suppression d√©finitive</b> : Suppression Firestore irr√©versible</li>
              <li><b>Filtres</b> : Tous, Actifs uniquement, Supprim√©s uniquement</li>
            </ul>
          </div>

          <details open>
            <summary>üóëÔ∏è Supprimer un utilisateur</summary>
            <div class="step">Menu <b>Gestion Utilisateurs</b> (r√©serv√© au Docteur/Owner)</div>
            <div class="step">Cliquez sur <b>Supprimer</b> √† c√¥t√© de l'utilisateur</div>
            <div class="step">Confirmez : l'utilisateur est marqu√© "supprim√©" et bloqu√©</div>
            <div class="step">L'historique de ses actions est conserv√© pour tra√ßabilit√©</div>
          </details>

          <details>
            <summary>üîÑ Restaurer un utilisateur</summary>
            <div class="step">Filtrez sur <b>Utilisateurs supprim√©s</b></div>
            <div class="step">Cliquez sur <b>Restaurer</b> √† c√¥t√© de l'utilisateur</div>
            <div class="step">L'utilisateur retrouve son acc√®s et peut se reconnecter</div>
          </details>

          <div class="notice warn">‚ö†Ô∏è <b>S√©curit√© :</b> Seul le propri√©taire (Docteur) peut g√©rer les utilisateurs. Un utilisateur ne peut pas se supprimer lui-m√™me.</div>
        </section>

        <section id="params">
          <h3>‚öôÔ∏è Param√®tres G√©n√©raux</h3>
          <p class="lead">Configuration compl√®te : documents (en-t√™te/pied/cachet), informations officine (ICE/IF/RC), alertes stock et p√©remption.</p>
          <details open>
            <summary>üñºÔ∏è Cachet & En-t√™te</summary>
            <p>T√©l√©chargez une image ou cr√©ez un cachet texte. Taille ajustable, activation/d√©sactivation flexible.</p>
          </details>
          <details>
            <summary>üîî Alertes Stock</summary>
            <p>D√©finissez un seuil global, configurez les alertes p√©remption (ex: 30 jours), num√©rotation automatique des lots.</p>
          </details>
        </section>

        <section id="legal">
          <h3>‚öñÔ∏è Documents L√©gaux <span class="feature-badge new">Nouveau</span></h3>
          <p class="lead">Acc√®s centralis√© √† tous les documents juridiques et conditions d'utilisation.</p>
          
          <div class="card">
            <h4 style="margin-bottom:12px;color:var(--primary);">üìú Documents Disponibles</h4>
            <ul class="check">
              <li><b>CGU</b> : Conditions G√©n√©rales d'Utilisation du logiciel SaaS</li>
              <li><b>CGV</b> : Conditions G√©n√©rales de Vente et abonnements</li>
              <li><b>Confidentialit√© & RGPD</b> : Politique de protection des donn√©es</li>
              <li><b>Mentions L√©gales</b> : Informations l√©gales √©diteur/h√©bergeur</li>
              <li><b>SLA</b> : Accord de Niveau de Service et garanties</li>
            </ul>
          </div>

          <details open>
            <summary>üìã Acc√®s aux documents</summary>
            <div class="step">Menu principal ‚Üí <b>Documents L√©gaux</b></div>
            <div class="step">S√©lectionnez l'onglet correspondant au document souhait√©</div>
            <div class="step">Consultez le contenu complet avec navigation par sections</div>
            <div class="step">Utilisez le bouton <b>‚Üê Retour</b> pour revenir √† l'application</div>
          </details>

          <div class="notice">üí° Ces documents sont conformes √† la l√©gislation marocaine (Loi 09-08) et au RGPD europ√©en.</div>
        </section>

        <section id="faq">
          <h3>‚ùì Questions Fr√©quentes</h3>
          <details open>
            <summary>üö´ Rien ne s'affiche dans l'application</summary>
            <p>V√©rifiez votre compte connect√© (r√¥le, identifiant soci√©t√©) et votre connexion internet. Essayez de vous d√©connecter puis reconnecter.</p>
          </details>
          <details>
            <summary>‚ö†Ô∏è Le bouton Enregistrer ne fonctionne pas</summary>
            <p>Assurez-vous que tous les champs requis sont remplis : produit, quantit√©, lot (si stock > 0).</p>
          </details>
          <details>
            <summary>üñ®Ô∏è Probl√®mes d'impression</summary>
            <p>Utilisez le bouton <b>PDF</b> en haut de page pour un rendu optimal. Sur mobile, privil√©giez Chrome ou Safari.</p>
          </details>
          <details>
            <summary>üîÑ Synchronisation entre appareils</summary>
            <p>La synchronisation Firebase est automatique. En cas de probl√®me, v√©rifiez votre connexion et rafra√Æchissez la page.</p>
          </details>
          <details>
            <summary>üíµ Modifier un paiement d√©j√† enregistr√©</summary>
            <p>Allez dans le module <b>Paiements</b>, d√©veloppez le document concern√©, puis cliquez sur <b>Modifier</b> ou <b>üóëÔ∏è Supprimer</b> √† c√¥t√© du paiement.</p>
          </details>
          <details>
            <summary>üì± Message WhatsApp ne part pas</summary>
            <p>V√©rifiez que le num√©ro de t√©l√©phone est au format international (+212...). Le message s'ouvre dans WhatsApp, vous devez cliquer sur <b>Envoyer</b>.</p>
          </details>
        </section>

        <section id="support">
          <h3>üÜò Support Technique</h3>
          <p class="lead">Besoin d'assistance ? Notre √©quipe est disponible via WhatsApp :</p>
          <p style="margin-top:24px">
            <a class="btn accent" id="waLink" target="_blank" rel="noopener" style="font-size:16px;padding:14px 28px;">
              üì± Contacter le Support WhatsApp
            </a>
          </p>
          <p style="margin-top:16px;color:var(--muted);font-size:14px;">
            üìû <span id="waNumber"></span>
          </p>
        </section>

      </div>

      <footer>
        <div style="margin-bottom:8px">
          <div class="pharma-cross" style="width:32px;height:32px;margin:0 auto 12px"></div>
        </div>
        ¬© <span id="year"></span> <b>Pharma Gestion</b> ‚Äì Guide Utilisateur Professionnel
        <br>
        <small style="margin-top:8px;display:block">Tous droits r√©serv√©s ‚Ä¢ Version 3.0 ‚Ä¢ Mise √† jour compl√®te</small>
      </footer>
    </main>
  </div>

<script>
(function(){
  const qs = (s, el=document)=>el.querySelector(s);
  const qsa = (s, el=document)=>[...el.querySelectorAll(s)];

  // THEME
  const theme = localStorage.getItem("docTheme") || "light";
  document.body.setAttribute("data-theme", theme);

  // Buttons
  qs("#printBtn").addEventListener("click", ()=> window.print());
  qs("#toggleTheme").addEventListener("click", ()=>{
    const next = document.body.getAttribute("data-theme")==="dark" ? "light" : "dark";
    document.body.setAttribute("data-theme", next);
    localStorage.setItem("docTheme", next);
  });
  qs("#expandAll").addEventListener("click", ()=> qsa("details").forEach(d=> d.open = true));
  qs("#collapseAll").addEventListener("click", ()=> qsa("details").forEach(d=> d.open = false));

  // TOC active
  const tocLinks = qsa(".toc a");
  const sections = qsa("main section[id]");
  const makeActive = (id)=>{
    tocLinks.forEach(a=> a.classList.toggle("active", a.getAttribute("href") === ("#"+id)));
  };
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){ makeActive(entry.target.id); }
    });
  }, { rootMargin: "-40% 0px -55% 0px", threshold: 0.01 });
  sections.forEach(s=> io.observe(s));

  // Search
  const searchInput = qs("#searchInput"); let lastQuery = "";
  searchInput.addEventListener("input", ()=>{
    const q = searchInput.value.trim().toLowerCase();
    if(q === lastQuery) return; lastQuery = q;

    sections.forEach(sec=>{
      qsa(".srchHit", sec).forEach(hit=>{
        const parent = hit.parentNode;
        parent.replaceChild(document.createTextNode(hit.textContent), hit);
        parent.normalize();
      });

      if(!q){ sec.classList.remove("hidden"); return; }

      const text = sec.textContent.toLowerCase();
      const show = text.includes(q);
      sec.classList.toggle("hidden", !show);

      if(show){ highlight(sec, q); }
    });
  });

  function highlight(root, q){
    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, null);
    const nodes = [];
    while(walker.nextNode()) nodes.push(walker.currentNode);
    nodes.forEach(node=>{
      const idx = node.nodeValue.toLowerCase().indexOf(q);
      if(idx >= 0 && node.nodeValue.trim()){
        const range = document.createRange();
        range.setStart(node, idx);
        range.setEnd(node, idx + q.length);
        const mark = document.createElement("span");
        mark.className = "srchHit";
        range.surroundContents(mark);
      }
    });
  }

  // WhatsApp
  const waNumber = "+33749618704";
  const waText = encodeURIComponent("Bonjour, j'ai besoin d'aide avec Pharma Gestion...");
  const waLink = qs("#waLink");
  waLink.href = `https://wa.me/${waNumber}?text=${waText}`;
  qs("#waNumber").textContent = waNumber;

  // Footer
  qs("#year").textContent = new Date().getFullYear();

  // Smooth scroll
  qsa('a[href^="#"]').forEach(a=>{
    a.addEventListener("click", (e)=>{
      const id = a.getAttribute("href").slice(1);
      const target = qs("#"+id);
      if(target){
        e.preventDefault();
        target.scrollIntoView({ behavior:"smooth", block:"start" });
        history.replaceState(null, "", "#"+id);
      }
    });
  });
})();
</script>
</body>
</html>